


ARM Macro Assembler    Page 1 


    1 00000000         ;******************** (C) COPYRIGHT 2018 IoTality ******
                       **************
    2 00000000         ;* File Name          : LED.s
    3 00000000         ;* Author             : Gopal
    4 00000000         ;* Date               : 07-Feb-2018
    5 00000000         ;* Description        : A simple code to blink LEDs on S
                       TM32F4 discovery board
    6 00000000         ;*                      - The functions are called from 
                       startup code
    7 00000000         ;*                      - Initialization carried out for
                        GPIO-D pins PD12 to PD15 (connected to LEDs)
    8 00000000         ;*                      - Blink interval delay implement
                       ed in software
    9 00000000         ;*******************************************************
                       ************************
   10 00000000                 GET              reg_stm32f407xx.inc
    1 00000000         
    2 00000000         ; ******* Register definitions *******
    3 00000000         
    4 00000000         ;As per STM32F407 datasheet and reference manual
    5 00000000         
    6 00000000 40023830 
                       RCC_AHB1ENR
                               EQU              0x40023830  ;Clock control for 
                                                            AHB1 peripherals (i
                                                            ncludes GPIO)
    7 00000000         
    8 00000000         ;GPIO-D control registers
    9 00000000 40020C00 
                       GPIOD_MODER
                               EQU              0x40020C00  ;set GPIO pin mode 
                                                            as Input/Output/Ana
                                                            log
   10 00000000 40020C04 
                       GPIOD_OTYPER
                               EQU              0x40020C04  ;Set GPIO pin type 
                                                            as push-pull or ope
                                                            n drain
   11 00000000 40020C08 
                       GPIOD_OSPEEDR
                               EQU              0x40020C08  ;Set GPIO pin switc
                                                            hing speed
   12 00000000 40020C0C 
                       GPIOD_PUPDR
                               EQU              0x40020C0C  ;Set GPIO pin pull-
                                                            up/pull-down
   13 00000000 40020C14 
                       GPIOD_ODR
                               EQU              0x40020C14  ;GPIO pin output da
                                                            ta
   14 00000000         
   15 00000000 40020C18 
                       GPIOD_BSRR
                               EQU              0x40020C18
   16 00000000         
   17 00000000 E000E010 
                       SYSTICK_CONTROLR
                               EQU              0xE000E010
   18 00000000 E000E014 



ARM Macro Assembler    Page 2 


                       SYSTICK_RELOADR
                               EQU              0xE000E014
   19 00000000         
   20 00000000         
   21 00000000         ; **************************
   22 00000000         
   23 00000000         
   24 00000000                 END
   11 00000000         
   12 00000000                 AREA             ISRCODE, CODE, READONLY
   13 00000000         
   14 00000000         SysTick_Handler
                               PROC
   15 00000000                 EXPORT           SysTick_Handler
   16 00000000         
   17 00000000 4905            LDR              R1, =GPIOD_BSRR
   18 00000002         
   19 00000002 B117            CBZ              R7, Turn_OFF
   20 00000004         Turn_ON
   21 00000004 F44F 4070       MOV              R0, #LEDs_ON
   22 00000008 E001            B                Done
   23 0000000A         Turn_OFF
   24 0000000A F04F 4070       MOV              R0, #LEDs_OFF
   25 0000000E         Done
   26 0000000E 6008            STR              R0, [R1]
   27 00000010 F087 0701       EOR              R7, R7, #0x01
   28 00000014         
   29 00000014 4770            BX               LR
   30 00000016         
   31 00000016                 ENDP
   32 00000016         
   33 00000016 00 00           ALIGN            4
   34 00000018 0000F000 
                       LEDs_ON EQU              0x0000F000
   35 00000018 F0000000 
                       LEDs_OFF
                               EQU              0xF0000000
   36 00000018         
   37 00000018         
   38 00000018                 END
              40020C18 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp.sp --apcs=
interwork --depend=.\objects\isr.d -o.\objects\isr.o -IC:\Users\kev_s\AppData\L
ocal\Arm\Packs\Keil\STM32F4xx_DFP\2.15.0\Drivers\CMSIS\Device\ST\STM32F4xx\Incl
ude -IC:\Keil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__U
VISION_VERSION SETA 531" --predefine="STM32F407xx SETA 1" --list=.\listings\isr
.lst ..\src\isr.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Done 0000000E

Symbol: Done
   Definitions
      At line 25 in file ..\src\isr.s
   Uses
      At line 22 in file ..\src\isr.s
Comment: Done used once
ISRCODE 00000000

Symbol: ISRCODE
   Definitions
      At line 12 in file ..\src\isr.s
   Uses
      None
Comment: ISRCODE unused
SysTick_Handler 00000000

Symbol: SysTick_Handler
   Definitions
      At line 14 in file ..\src\isr.s
   Uses
      At line 15 in file ..\src\isr.s
Comment: SysTick_Handler used once
Turn_OFF 0000000A

Symbol: Turn_OFF
   Definitions
      At line 23 in file ..\src\isr.s
   Uses
      At line 19 in file ..\src\isr.s
Comment: Turn_OFF used once
Turn_ON 00000004

Symbol: Turn_ON
   Definitions
      At line 20 in file ..\src\isr.s
   Uses
      None
Comment: Turn_ON unused
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIOD_BSRR 40020C18

Symbol: GPIOD_BSRR
   Definitions
      At line 15 in file ..\src\reg_stm32f407xx.inc
   Uses
      At line 17 in file ..\src\isr.s
Comment: GPIOD_BSRR used once
GPIOD_MODER 40020C00

Symbol: GPIOD_MODER
   Definitions
      At line 9 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: GPIOD_MODER unused
GPIOD_ODR 40020C14

Symbol: GPIOD_ODR
   Definitions
      At line 13 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: GPIOD_ODR unused
GPIOD_OSPEEDR 40020C08

Symbol: GPIOD_OSPEEDR
   Definitions
      At line 11 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: GPIOD_OSPEEDR unused
GPIOD_OTYPER 40020C04

Symbol: GPIOD_OTYPER
   Definitions
      At line 10 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: GPIOD_OTYPER unused
GPIOD_PUPDR 40020C0C

Symbol: GPIOD_PUPDR
   Definitions
      At line 12 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: GPIOD_PUPDR unused
LEDs_OFF F0000000

Symbol: LEDs_OFF
   Definitions
      At line 35 in file ..\src\isr.s
   Uses
      At line 24 in file ..\src\isr.s
Comment: LEDs_OFF used once
LEDs_ON 0000F000

Symbol: LEDs_ON



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 34 in file ..\src\isr.s
   Uses
      At line 21 in file ..\src\isr.s
Comment: LEDs_ON used once
RCC_AHB1ENR 40023830

Symbol: RCC_AHB1ENR
   Definitions
      At line 6 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: RCC_AHB1ENR unused
SYSTICK_CONTROLR E000E010

Symbol: SYSTICK_CONTROLR
   Definitions
      At line 17 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: SYSTICK_CONTROLR unused
SYSTICK_RELOADR E000E014

Symbol: SYSTICK_RELOADR
   Definitions
      At line 18 in file ..\src\reg_stm32f407xx.inc
   Uses
      None
Comment: SYSTICK_RELOADR unused
11 symbols
352 symbols in table
